<!-- Profile Header -->
<section class="py-5" style="background: var(--gradient-dark);">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-4 text-center mb-4">
                <div class="profile-avatar-container">
                    {{#if user.avatar}}
                        <img src="{{user.avatar}}" alt="Avatar" class="profile-avatar">
                    {{else}}
                        <div class="profile-avatar-placeholder">
                            {{substring user.name 0 1}}
                        </div>
                    {{/if}}
                    <div class="avatar-upload-overlay">
                        <a href="/users/edit" class="btn btn-modern btn-sm">
                            <i class="fas fa-camera me-1"></i>Alterar
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="profile-info">
                    <h1 class="display-5 fw-bold gradient-text mb-2">{{user.name}}</h1>
                    <p class="lead text-secondary mb-3">@{{user.username}}</p>
                    {{#if user.bio}}
                    <p class="text-secondary mb-4">{{user.bio}}</p>
                    {{/if}}
                    <div class="profile-links mb-4">
                        {{#if user.github}}
                        <a href="{{user.github}}" target="_blank" class="btn btn-outline-modern btn-sm me-2">
                            <i class="fab fa-github me-1"></i>GitHub
                        </a>
                        {{/if}}
                        {{#if user.linkedin}}
                        <a href="{{user.linkedin}}" target="_blank" class="btn btn-outline-modern btn-sm me-2">
                            <i class="fab fa-linkedin me-1"></i>LinkedIn
                        </a>
                        {{/if}}
                        <a href="/users/edit" class="btn btn-modern btn-sm">
                            <i class="fas fa-cog me-1"></i>Editar Perfil
                        </a>
                    </div>
                    <div class="profile-meta text-secondary">
                        <small>
                            <i class="fas fa-envelope me-1"></i>{{user.email}}
                        </small>
                        <small class="ms-3">
                            <i class="fas fa-calendar me-1"></i>
                            Membro desde {{formatDate user.createdAt}}
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="py-5">
    <div class="container">
        <div class="row g-4 mb-5">
            <div class="col-md-3">
                <div class="card card-modern text-center">
                    <div class="card-body p-4">
                        <div class="stat-icon mb-3">
                            <i class="fas fa-trophy fa-2x" style="background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;"></i>
                        </div>
                        <h3 class="fw-bold gradient-text">{{#if stats.points}}{{stats.points}}{{else}}0{{/if}}</h3>
                        <p class="text-secondary mb-0">Pontos</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card card-modern text-center">
                    <div class="card-body p-4">
                        <div class="stat-icon mb-3">
                            <i class="fas fa-newspaper fa-2x" style="background: var(--gradient-secondary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;"></i>
                        </div>
                        <h3 class="fw-bold gradient-text-secondary">{{stats.totalPosts}}</h3>
                        <p class="text-secondary mb-0">Postagens</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card card-modern text-center">
                    <div class="card-body p-4">
                        <div class="stat-icon mb-3">
                            <i class="fas fa-eye fa-2x" style="background: var(--gradient-accent); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;"></i>
                        </div>
                        <h3 class="fw-bold gradient-text-accent">{{stats.totalViews}}</h3>
                        <p class="text-secondary mb-0">Visualizações</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card card-modern text-center">
                    <div class="card-body p-4">
                        <div class="stat-icon mb-3">
                            <i class="fas fa-heart fa-2x" style="color: var(--primary-pink);"></i>
                        </div>
                        <h3 class="fw-bold" style="color: var(--primary-pink);">{{stats.totalLikes}}</h3>
                        <p class="text-secondary mb-0">Curtidas</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievements Section -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card card-modern">
                    <div class="card-header text-center py-4" style="background: var(--gradient-primary); border: none;">
                        <h4 class="mb-0 text-white">
                            <i class="fas fa-medal me-2"></i>Conquistas
                        </h4>
                    </div>
                    <div class="card-body p-4">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="achievement-card">
                                    <i class="fas fa-pen-fancy fa-2x mb-2"></i>
                                    <h6>Primeiro Post</h6>
                                    <p class="small text-secondary">Crie sua primeira postagem</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="achievement-card">
                                    <i class="fas fa-star fa-2x mb-2"></i>
                                    <h6>Autor Ativo</h6>
                                    <p class="small text-secondary">Crie 5 postagens</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="achievement-card">
                                    <i class="fas fa-fire fa-2x mb-2"></i>
                                    <h6>Popular</h6>
                                    <p class="small text-secondary">100+ visualizações</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Posts Section -->
        <div class="row">
            <div class="col-12">
                <div class="card card-modern">
                    <div class="card-header text-center py-4" style="background: var(--gradient-secondary); border: none;">
                        <h4 class="mb-0 text-white">
                            <i class="fas fa-newspaper me-2"></i>Minhas Postagens ({{posts.length}})
                        </h4>
                    </div>
                    <div class="card-body p-4">
                        {{#if posts}}
                        <div class="row g-4">
                            {{#each posts}}
                            <div class="col-12">
                                <div class="card post-card">
                                    <div class="card-body p-4">
                                        <div class="d-flex justify-content-between align-items-start mb-3">
                                            <div class="flex-grow-1">
                                                <div class="post-category mb-2">{{category}}</div>
                                                <h5 class="post-title mb-2">{{title}}</h5>
                                                <p class="post-content mb-3">{{truncate content 200}}</p>
                                            </div>
                                            <small class="text-muted">
                                                <i class="fas fa-calendar me-1"></i>
                                                {{formatDate createdAt}}
                                            </small>
                                        </div>
                                        
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="post-stats">
                                                <div class="post-stat">
                                                    <i class="fas fa-eye"></i>
                                                    {{views}}
                                                </div>
                                                <div class="post-stat">
                                                    <i class="fas fa-heart"></i>
                                                    {{likes}}
                                                </div>
                                            </div>
                                            
                                            <div class="d-flex gap-2">
                                                <a href="/posts/{{id}}" class="btn btn-outline-modern btn-sm">
                                                    <i class="fas fa-eye me-1"></i>Ver
                                                </a>
                                                <a href="/posts/{{id}}/edit" class="btn btn-outline-modern btn-sm">
                                                    <i class="fas fa-edit me-1"></i>Editar
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                        {{else}}
                        <div class="text-center py-5">
                            <i class="fas fa-newspaper fa-4x text-secondary mb-4"></i>
                            <h5 class="text-secondary mb-3">Nenhuma postagem encontrada</h5>
                            <p class="text-secondary mb-4">Comece a compartilhar conhecimento com a comunidade!</p>
                            <a href="/posts/create" class="btn btn-modern">
                                <i class="fas fa-plus me-2"></i>Criar Primeira Postagem
                            </a>
                        </div>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.profile-avatar-container {
    position: relative;
    display: inline-block;
}

.profile-avatar {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid var(--primary-purple);
    box-shadow: var(--shadow-glow);
    transition: all 0.3s ease;
}

.profile-avatar-placeholder {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    background: var(--gradient-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 4rem;
    font-weight: bold;
    color: white;
    border: 4px solid var(--primary-purple);
    box-shadow: var(--shadow-glow);
    transition: all 0.3s ease;
}

.avatar-upload-overlay {
    position: absolute;
    bottom: 0;
    right: 0;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.profile-avatar-container:hover .avatar-upload-overlay {
    opacity: 1;
}

.achievement-card {
    text-align: center;
    padding: 1.5rem;
    border-radius: var(--border-radius);
    background: var(--bg-darker);
    border: 2px solid rgba(139, 92, 246, 0.2);
    transition: all 0.3s ease;
    opacity: 0.5;
}

.achievement-card.achieved {
    background: var(--bg-card);
    border-color: var(--primary-green);
    opacity: 1;
    box-shadow: var(--shadow-glow);
}

.achievement-card.achieved i {
    color: var(--primary-green);
}

.stat-icon {
    transition: transform 0.3s ease;
}

.stat-icon:hover {
    transform: scale(1.1);
}
</style>
